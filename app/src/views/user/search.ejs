<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
  <%- include('../components/meta.ejs') %>
  <body>
    <%- include('../components/dark-light.ejs') %>

    <main class="d-flex flex-nowrap">
      <%- include('../components/sidebar.ejs', {status: 'search'}) %>

      <section class="w-100">
        <%- include('../components/navbar.ejs') %> <% if (users.length === 0) {
        %>
        <h1 class="text-center mt-5 fw-bold fs-4">No data found</h1>
        <% } else { %>
        <table
          style="width: 99%"
          class="text-center mx-auto table mt-5 table-striped table-bordered"
        >
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Full Name</th>
              <th scope="col">Gender</th>
              <th scope="col">Country</th>
              <th scope="col">Age</th>
              <th scope="col">Last updated</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <% users.forEach((user, index) => { %>
            <tr>
              <th scope="row"><%= index + 1 %></th>
              <td><%= user.firstname + " " + user.lastname %></td>
              <td><%= user.gender %></td>
              <td><%= user.country %></td>
              <td><%= user.age %></td>
              <td><%= moment(user.updatedAt).fromNow() %></td>
              <td>
                <a
                  data-bs-toggle="tooltip"
                  data-bs-title="View details"
                  data-bs-placement="top"
                  class="btn btn-primary btn-sm"
                  href="../view/<%= user._id %>"
                  ><i class="bi bi-eye"></i
                ></a>

                <a
                  data-bs-toggle="tooltip"
                  data-bs-title="Edit user"
                  data-bs-placement="top"
                  class="btn btn-primary btn-sm"
                  href="../edit/<%= user._id %>"
                >
                  <i class="bi bi-pencil"></i>
                </a>
                <button
                  data-bs-toggle="tooltip"
                  data-bs-title="Delete user"
                  data-bs-placement="top"
                  class="btn btn-danger btn-sm"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
        <% } %>
      </section>
    </main>
    <script src="../js/bootstrap.bundle.min.js"></script>

    <script src="../js/sidebars.js"></script>
    <script src="../js/main.js"></script>
  </body>
</html>
